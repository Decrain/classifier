隨着PCB信號切換速度不斷增長，當今的PCB設計廠商需要理解和控制PCB跡線的阻抗。相應於現代數字電路較短的信號傳輸時間和較高的時鐘速率，PCB跡線不再是簡單的連接，而是傳輸線。

在實際情況中，需要在數字邊際速度高於1ns或模擬頻率超過300Mhz時控制跡線阻抗。PCB跡線的關鍵參數之一是其特性阻抗（即波沿信號傳輸線路傳送時電壓與電流的比值）。印製電路板上導線的特性阻抗是電路板設計的一個重要指標，特別是在高頻電路的PCB設計中，必須考慮導線的特性阻抗和器件或信號所要求的特性阻抗是否一致，是否匹配。這就涉及到兩個概念：阻抗控制與阻抗匹配，本文重點討論阻抗控制和疊層設計的問題。

阻抗控制(eImpedanceControling)，線路板中的導體中會有各種信號的傳遞，爲提高其傳輸速率而必須提高其頻率，線路本身若因蝕刻，疊層厚度，導線寬度等不同因素，將會造成阻抗值得變化，使其信號失真。故在高速線路板上的導體，其阻抗值應控制在某一範圍之內，稱爲「阻抗控制」。

PCB跡線的阻抗將由其感應和電容性電感、電阻和電導係數確定。影響PCB走線的阻抗的因素主要有:銅線的寬度、銅線的厚度、介質的介電常數、介質的厚度、焊盤的厚度、地線的路徑、走線周邊的走線等。PCB阻抗的範圍是25至120歐姆。

在實際情況下，PCB傳輸線路通常由一個導線跡線、一個或多個參考層和絕緣材質組成。跡線和板層構成了控制阻抗。PCB將常常採用多層結構，並且控制阻抗也可以採用各種方式來構建。但是，無論使用什麼方式，阻抗值都將由其物理結構和絕緣材料的電子特性決定：

微帶線是一根帶狀導線，指只有一邊存在參考平面的傳輸線，頂部和側邊都曝置於空氣中（也可上敷塗覆層），位於絕緣常數Er線路板的表面之上，以電源或接地層爲參考。如下圖所示：

帶狀線是置於兩個參考平面之間的帶狀導線，如下圖所示，H1和H2代表的電介質的介電常數可以不同。

上述兩個例子只是微帶線和帶狀線的一個典型示範，具體的微帶線和帶狀線有很多種，如覆膜微帶線等，都是跟具體的PCB的疊層結構相關。

用於計算特性阻抗的等式需要複雜的數學計算，通常使用場求解方法，其中包括邊界元素分析在內，因此使用專門的阻抗計算軟件SI9000，我們所需做的就是控制特性阻抗的參數：

我們可以通過控制這幾個參數來達到阻抗控制的目的，下面以安維的底板PCB爲例說明阻抗控制的步驟和SI9000的使用：

第二層爲地平面，第五層爲電源平面，其餘各層爲信號層。

說明：中間各層間的電介質爲FR-4，其介電常數爲4.2；頂層和底層爲裸層，直接與空氣接觸，空氣的介電常數爲1。

DDR的數據線，單端阻抗爲50歐姆，走線層爲TOP和L2、L3層，走線寬度爲5mil。

時鐘信號CLK和USB數據線，差分阻抗控制在100歐姆，走線層爲L2、L3層，走線寬度爲6mil，走線間距爲6mil。

*計算值與名義值差別應小於的阻抗範圍的10%：

TOP層：銅厚爲0.5OZ，走線寬度爲5MIL，距參考平面的距離爲3.8MIL，介電常數爲4.2。選擇模型，代入參數，選擇losslesscalculation,如圖所示：

計算得到單端阻抗爲Zo=55.08ohm，與要求相差5歐姆。根據板廠的反饋，他們將走線寬度改爲6MIL以達到阻抗控制，經過驗證，在寬度W2=6MIL,W1=7MIL的情況下，計算得到的單端阻抗爲Zo=50.56歐姆，符合設計要求。

同理可以得到L3層的單端阻抗，在此不再贅述。

由PCB設計可知，底板PCB中時鐘走線在L3層，USB數據線在L2層，走線寬度均爲6MIL,間距爲6MIL。

根據板廠的反饋，差分阻抗只能做到85歐姆，與計算結果接近（他們可以微調板層厚度，但不能調線）。但是改變線間距爲12MIL時，計算得到的差分阻抗爲92.97歐姆，再將線寬調爲5MIL時，差分阻抗爲98.99歐姆，基本符合設計要求。

1、當差分走線在中間信號層走線時，差分阻抗的控制比較困難，因爲精度不夠，就是說改變介質層厚度對差分阻抗的影響不大，只有改變走線的間距纔對差分阻抗影響較大。但是當走線在頂層或底層時，差分阻抗就比較好控制，很容易達到設計要求，通過實際計算髮現，重要的信號線最好走表層，容易進行阻抗控制，尤其是時鐘信號差分對。

2、在PCB設計之前，首先必須通過阻抗計算，把PCB的疊層參數確定，如各層的銅厚，介質層的厚度等等，還有差分走線的寬度和間距都需要事先計算得出，這些就是PCB的前端仿真，保證重要的信號線的阻抗控制滿足設計要求。

以我們使用最多的FR-4介質的材料板爲例：實際多層板是芯板和壓合樹脂層堆疊而成，其芯板本身也是由半固化片組合而成。常用的三種半固化片技術指標如下表1所示。

半固化片組合的介電常數不是簡單的算術平均，甚至在構成微帶線和帶狀線時的Er值也有所不同。另一方面，FR-4的Er也隨信號頻率的變化有一定改變，不過在1GHz以下一般認爲FR-4材料的Er值約4.2。通常計算時採用4.2。

4、在實際的阻抗控制中，一般採用介質爲FR-4，其Er約4.2，線條厚度t對阻抗影響較小，實際主要可以調整的是H和W，W(設計線寬)一般情況下是由設計人員決定的，但在設計時應充分考慮線寬對阻抗的配合性和實際加工精度。當然，採用較小的W值後線條厚度t的影響就不容忽視了。H(介質層厚度)對阻抗控制的影響最大，實際H有兩類情況：一種是芯板，材料供應商所提供的板材中H的厚度也是由以上三種半固化片組合而成，但其在組合的過程中必然會考慮三種材料的特性，而絕非無條件的任意組合，因此板材的厚度就有了一定的規定，形成了一個相應的清單，同時H也有了一定的限制。如0.17mm1/1的芯板爲2116×1，0.4mm1/1的芯板爲1080×2+7628×1等。另一種是多層板中壓合部分的厚度：其方法基本上與前相同但需注意銅層的損失。如內電層間用半固化片進行填充，因在製作內層的過程中銅箔被蝕刻掉的部分很少，則半固化片中樹脂對該區的填充亦很少，則半固化片的厚度損失可忽略。反之，如信號層之間用半固化片進行填充，由於銅箔被蝕刻掉的部分較多，則半固化片的厚度損失會很大且難以估計。因此，有人建議在內層的信號層要求鋪銅以減少厚度損失。（上述資料來源於：PCB高速數字設計中的阻抗控制（西南電子電信技術研究所陳飛））

5、特徵阻抗與傳輸線的寬度是成反比的,寬度越寬，阻抗越低,反之則阻抗更高。

6、在有些板的設計要求中對板層厚度有限制時，此時要達到比較好的阻抗控制，採用好的疊層設計非常關鍵。從實際的計算中可以得出以下結論：

a.每個信號層都要有參考平面相鄰,能保證其阻抗和信號質量;

b.每個電源層都要有完整的地平面相鄰,使得電源的性能得以較好的保證;

7、關於差分走線的線寬和間距對阻抗控制的討論：

通過軟件計算髮現，改變差分對的間距對阻抗控制的影響較大，但是這裏涉及到另一個問題，就是差分對的耦合問題。

差分對耦合的主要目的是增強對外界的抗干擾能力和抑止EMI。耦合分爲緊耦合方式(即差分對線間距小於或等於線寬)和鬆耦合方式。

如果能保證周圍所有的走線離差分對較遠（比如遠遠大於3倍的線寬），那麼差分走線可以不用保證緊密的耦合，最關鍵的是保證走線長度相等即可。（可以參見Johnson的信號完整性網站上的關於差分走線的闡述，他就要求他的layout工程師將差分線離得較遠，這樣可以方面繞線）。只是目前大多數多層高速的PCB板走線空間很緊密，根本無法將差分走線和其它走線隔離開來，所以這時候保持緊密的耦合以增加抗干擾能力是應該的。

緊耦合不是差分走線的必要條件，但是在空間不夠時走線採用緊耦合方式能夠增強差分走線的抗干擾能力。因此，對於差分對的阻抗控制問題，怎麼調節各個參數需要綜合考慮上述因素，擇優選擇。一般情況下不輕易調整差分對的間距和線寬。

substrate表示基板層，即電介質層，一般採用FR-4，厚度是通過阻抗計算軟件計算得到，介電常數爲4.2（頻率小於1GHz時）。

點擊Weight(oz)項，可以設定鋪銅的銅厚，銅厚決定了走線的厚度。

PP（prepreg）是種介質材料，由玻璃纖維和環氧樹脂組成，core其實也是PP類型介質，只不過他的兩面都覆有銅箔，而PP沒有，製作多層板時，通常將CORE和PP配合使用，CORE與CORE之間用PP粘合。

PCB的疊層設計要保持對稱，即各層的介質層厚、鋪銅厚度上下對稱，拿六層板來說，就是TOP-GND與BOTTOM-POWER的介質厚度和銅厚一致，GND-L2與L3-POWER的介質厚度和銅厚一致。這樣在層壓的時候不會出現翹曲。

（2）、信號層應該和鄰近的參考平面緊密耦合（即信號層和鄰近敷銅層之間的介質厚度要很小）；電源敷銅和地敷銅應該緊密耦合。

（3）、在很高速的情況下，可以加入多餘的地層來隔離信號層，但建議不要多家電源層來隔離，這樣可能造成不必要的噪聲干擾。

對於母板的層排布，現有母板很難控制平行長距離佈線，對於板級工作頻率在50MHZ以上的