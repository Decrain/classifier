在前面的文章中，我們曾對HAProxy、Varnish的性能、配置做過詳細介紹。今天給各位帶來的是這三款開源代理服務器軟件的區別，以及什麼樣的場景使用哪款軟件。

哪個軟件能夠支撐高可用，高併發，還要好維護，運維和網絡管理員如何從這些方案中選擇一個適合的代理服務器解決方案。

代理服務器的位置是後端服務的前端，用來負載流量，分配資源，以及解決安全攻擊等問題，比如DDOS，並且支持Web應用的高可用。

Varnish是一款反向HTTP代理服務器，提供加速設計給大流量的網站應用。不像其它，如果你要使用代理和負載均衡。

Varnish的典型用戶有WikiPedia，紐約時報。我在好樂買（Okbuy.com）也部署了Varnish。保證了服務器的性能和高可用。

Nginx恐怕是Web服務器裏排名老大，它兼具負載均衡、反向代理等一身的Web服務器。Nginxr的開發活躍度和社區也都非常活躍。

目前，Nginx分爲開源版和企業版兩種，另外還有變體版本，比如淘寶優化的Tenginx等。Nginx已經被大量高負載網站所應用，國內外知名大部分都已經使用Nginx做爲Web服務器，如WordPress,Aribnb，中國的BAT等大量採用。

Nginx實際上已經是Web服務器的事實標準，是高可用以及負載均衡網站解決方案的典型開源軟件。

HAProxy是一個免費且開源的軟件。它提供3層（TCP）和7層(http）協議支持負載均衡以及反向代理服務器功能。

它的速度快，並且節省資源（CPU/內存）。同時在支持多個操作系統，如Linux，Solaris，FreeBSD等。

HAProxy的開發時間從2002年開始的。

Nginx和Varnish都可以做反向代理緩存，也可以用於兩個或更多個Apache之間的負載均衡，提供動態內容。根據我們的經驗，Nginx的表現在靜態頁面會更好。

Nginx默認支持SSL，SPDY和HTTP/2.0，HAProxy也同樣支持，Varnish不支持使用SPDY3或HTTP/2.0的SSL。

以下是標準評測表，並不是一個詳細的數據，如果需要更詳細的評測數據，請閱讀每款軟件的官方文檔。

從上文和圖中可以看到，NginxHAProxy和Varnish這三款軟件都是非常不錯的代理服務器解決方案。

Nginx是一個完整解決方案，不僅是一個代理服務器，還是一個全棧的Web服務器，比HAProxy和Varnish的功能都要全面。

因此，如果只選擇一款代理服務器，那還是最好去用Nginx搭建。它可以適用很多個場景。一旦網站開始運營，調整Web服務器與代理服務器是相當枯燥和磨人的，因此從一開始就用Nginx可以減輕這些焦慮。它既可以允當Web服務器，HTTP代理服務器，郵件代理服務器和負載均衡功能。

接下是第二選擇。從職責來講，Nginx要乾的事兒太多，很多擅長不擅長的基本都幹了。

從軟件角度，單一職責會讓工作更清晰。當我們不需要一個完整的Web服務器功能時，可以選用HAProxy做爲代理服務器職責，它的資源佔用率是非常低的，速度也更快。

從目前掌握的資料來看，Varnish目前步子走的稍有點慢。

當前Varnish的最新版本不能很好的支持HTTP/2.0協議，也許浪漫的法國人正在積極蘊釀更好的功能吧，或許他們還沒有興趣來做。我是Varnish粉，也一直在用，期待它很快能夠跟上。